import{c as i,g as f}from"./index-6XEDYCH-.js";const s="app:doctors";function l(r){if(!r)return[];try{const t=JSON.parse(r);return Array.isArray(t)?t:[]}catch{return[]}}function n(r){localStorage.setItem(s,JSON.stringify(r))}function a(){return l(localStorage.getItem(s)).map(r=>({...r,createdBy:r.createdBy}))}function p(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():"d_"+Math.random().toString(36).slice(2,11)}function g(r){const t=new Date().toISOString(),e={...r,id:p(),createdAt:t,updatedAt:t,createdBy:f()?.email},c=a();return c.push(e),n(c),e}function m(r,t){const e=a(),c=e.findIndex(u=>u.id===r);if(c===-1)return null;const o=e[c];if(!i(o.createdBy))throw new Error("Not authorized to update doctor");const d={id:o.id,createdAt:o.createdAt,doctorName:t.doctorName??o.doctorName,doctorSpecialist:t.doctorSpecialist??o.doctorSpecialist,doctorEmail:t.doctorEmail??o.doctorEmail,doctorContact:t.doctorContact??o.doctorContact,doctorExperience:t.doctorExperience??o.doctorExperience,updatedAt:new Date().toISOString(),createdBy:o.createdBy};return e[c]=d,n(e),d}function S(r){const t=a(),e=t.findIndex(o=>o.id===r);if(e===-1)return!1;if(!i(t[e].createdBy))throw new Error("Not authorized to delete doctor");const c=t.filter(o=>o.id!==r);return c.length===t.length?!1:(n(c),!0)}export{g as a,S as d,a as g,m as u};

import{c as d,g as l}from"./index-C88TSPKu.js";const s="app:patients";function f(n){if(!n)return[];try{const t=JSON.parse(n);return Array.isArray(t)?t:[]}catch{return[]}}function i(n){localStorage.setItem(s,JSON.stringify(n))}function o(){return f(localStorage.getItem(s)).map(t=>({...t,patientAlternateContact:t.patientAlternateContact??"",patientDateOfBirth:t.patientDateOfBirth??"",createdBy:t.createdBy}))}function u(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():"p_"+Math.random().toString(36).slice(2,11)}function y(n){console.log("calling");debugger;const t=new Date().toISOString(),a={...n,id:u(),createdAt:t,updatedAt:t,createdBy:l()?.email},r=o();return r.push(a),i(r),a}function A(n,t){const a=o(),r=a.findIndex(p=>p.id===n);if(r===-1)return null;const e=a[r];if(!d(e.createdBy))throw new Error("Not authorized to update patient");const c={id:e.id,createdAt:e.createdAt,patientName:t.patientName??e.patientName,patientGender:t.patientGender??e.patientGender,patientAddress:t.patientAddress??e.patientAddress,patientContact:t.patientContact??e.patientContact,patientAlternateContact:t.patientAlternateContact??e.patientAlternateContact??"",patientEmail:t.patientEmail??e.patientEmail,patientDateOfBirth:t.patientDateOfBirth??e.patientDateOfBirth??"",updatedAt:new Date().toISOString(),createdBy:e.createdBy};return a[r]=c,i(a),c}function m(n){const t=o(),a=t.findIndex(e=>e.id===n);if(a===-1)return!1;if(!d(t[a].createdBy))throw new Error("Not authorized to delete patient");const r=t.filter(e=>e.id!==n);return r.length===t.length?!1:(i(r),!0)}export{y as a,m as d,o as g,A as u};

import V from"./CommonDialog-DZsHkcTd.js";import{N as q}from"./NoData-CA4PY38B.js";import{u as w,a as O,d as M,g as F}from"./doctorServices-BfzcM26y.js";import{t as B,D as U,T as _,b as L,c as h}from"./index-C88TSPKu.js";import{i as b,h as T,a as j,b as R}from"./validationRules-BV0FID92.js";import{_ as y,v as l,x as d,y as r,G as A,z as u,J as n,W as m,D as a,M as D,q as p,A as z,f,B as E,F as G}from"./_plugin-vue_export-helper-b3T1jOJ5.js";import{d as H}from"./data-XbIIhJAV.js";const J={name:"CreateDoctor",mixins:[B],props:{userData:{type:Object,required:!1}},data(){return{doctorName:"",doctorSpecialist:"",doctorExperience:null,doctorContact:"",doctorEmail:"",refCode:"",REF_CODE:U,errors:{doctorName:"",doctorSpecialist:"",doctorExperience:"",doctorContact:"",doctorEmail:"",refCode:""},touched:{doctorName:!1,doctorSpecialist:!1,doctorExperience:!1,doctorContact:!1,doctorEmail:!1,refCode:!1}}},emits:["doctor-added","cancel-form","doctor-updated"],computed:{formValid(){return this.checkValid()},isEditMode(){return!!this.userData}},watch:{userData:{immediate:!0,handler(t){t?(this.doctorName=t.doctorName||"",this.doctorSpecialist=t.doctorSpecialist||"",this.doctorExperience=typeof t.doctorExperience=="number"?t.doctorExperience:parseInt(t.doctorExperience||"0",10)||0,this.doctorContact=t.doctorContact||"",this.doctorEmail=t.doctorEmail||"",Object.keys(this.errors).forEach(e=>this.errors[e]="")):this.resetForm()}}},methods:{baseValidation(){const t={doctorName:"",doctorSpecialist:"",doctorExperience:"",doctorContact:"",doctorEmail:"",refCode:""};return b(this.doctorName)?T(this.doctorName,2)||(t.doctorName="Min 2 characters"):t.doctorName="Name required",b(this.doctorSpecialist)||(t.doctorSpecialist="Specialist required"),this.doctorExperience===null||isNaN(this.doctorExperience)?t.doctorExperience="Experience required":this.doctorExperience<0?t.doctorExperience="Cannot be negative":this.doctorExperience>60&&(t.doctorExperience="Unrealistic value"),b(this.doctorContact)?j(this.doctorContact)||(t.doctorContact="Must be 10 digits"):t.doctorContact="Contact required",b(this.doctorEmail)?R(this.doctorEmail)||(t.doctorEmail="Invalid email"):t.doctorEmail="Email required",this.isEditMode||(this.refCode.trim()?this.refCode.trim()!==this.REF_CODE&&(t.refCode="Invalid referral code"):t.refCode="Referral code required"),t},checkValid(){const t=this.baseValidation();return Object.values(t).every(e=>e==="")},validateAll(){this.errors=this.baseValidation()},validateField(t){const e=this.baseValidation();this.errors[t]=e[t]||""},onInput(t){this.touched[t]=!0,this.validateField(t)},resetForm(){this.doctorName="",this.doctorSpecialist="",this.doctorExperience=null,this.doctorContact="",this.doctorEmail="",this.refCode="",Object.keys(this.errors).forEach(t=>this.errors[t]="")},submitForm(){if(this.touched=Object.fromEntries(Object.keys(this.touched).map(e=>[e,!0])),this.validateAll(),!this.checkValid())return;const t={doctorName:this.doctorName.trim(),doctorSpecialist:this.doctorSpecialist.trim(),doctorExperience:this.doctorExperience,doctorContact:this.doctorContact.trim(),doctorEmail:this.doctorEmail.trim()};this.isEditMode&&this.userData?(w(this.userData.id,t),this.toastSuccess("Doctor updated successfully"),this.$emit("doctor-updated"),this.resetForm()):(O(t),this.toastSuccess("Doctor added successfully"),this.resetForm(),this.$emit("doctor-added"))}}},K={class:"mt-1"},P={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},W={class:"space-y-1 text-sm"},Q={key:0,class:"text-xs text-red-600"},X={class:"space-y-1 text-sm"},Y={key:0,class:"text-xs text-red-600"},Z={class:"space-y-1 text-sm"},$=["disabled"],ee={key:0,class:"text-xs text-red-600"},te={class:"space-y-1 text-sm"},oe={key:0,class:"text-xs text-red-600"},re={class:"space-y-1 text-sm"},se={key:0,class:"text-xs text-red-600"},ie={class:"space-y-1 text-sm"},de={key:0,class:"text-xs text-red-600"},ce={class:"flex justify-end items-center gap-1 mt-2"},le=["disabled"];function ne(t,e,x,g,o,s){return d(),l("div",null,[r("div",K,[r("form",{onSubmit:e[19]||(e[19]=A((...i)=>s.submitForm&&s.submitForm(...i),["prevent"]))},[r("div",P,[r("div",W,[e[20]||(e[20]=r("label",{for:"doctorName",class:"block text-gray-600 required"},"Doctor Name",-1)),u(r("input",{type:"text",id:"doctorName","onUpdate:modelValue":e[0]||(e[0]=i=>o.doctorName=i),onInput:e[1]||(e[1]=i=>s.onInput("doctorName")),onBlur:e[2]||(e[2]=i=>s.onInput("doctorName")),placeholder:"Dr. Dinesh Kumar",class:"w-full px-4 py-3 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,544),[[m,o.doctorName]]),o.touched.doctorName&&o.errors.doctorName?(d(),l("p",Q,a(o.errors.doctorName),1)):n("",!0)]),r("div",X,[e[21]||(e[21]=r("label",{for:"doctorSpecialist",class:"block text-gray-600 required"},"Specialist",-1)),u(r("input",{type:"text",id:"doctorSpecialist","onUpdate:modelValue":e[3]||(e[3]=i=>o.doctorSpecialist=i),onInput:e[4]||(e[4]=i=>s.onInput("doctorSpecialist")),onBlur:e[5]||(e[5]=i=>s.onInput("doctorSpecialist")),placeholder:"Cardiologist",class:"w-full px-4 py-3 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,544),[[m,o.doctorSpecialist]]),o.touched.doctorSpecialist&&o.errors.doctorSpecialist?(d(),l("p",Y,a(o.errors.doctorSpecialist),1)):n("",!0)]),r("div",Z,[r("label",{for:"refCode",class:D(["block text-gray-600",{required:!s.isEditMode}])},"Referral Code",2),u(r("input",{type:"text",id:"refCode","onUpdate:modelValue":e[6]||(e[6]=i=>o.refCode=i),onInput:e[7]||(e[7]=i=>s.onInput("refCode")),onBlur:e[8]||(e[8]=i=>s.onInput("refCode")),placeholder:"DOC-REF-2025",class:"w-full px-4 py-3 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500",disabled:s.isEditMode},null,40,$),[[m,o.refCode]]),o.touched.refCode&&o.errors.refCode?(d(),l("p",ee,a(o.errors.refCode),1)):n("",!0)]),r("div",te,[e[22]||(e[22]=r("label",{for:"doctorExperience",class:"block text-gray-600 required"},"Experience (years)",-1)),u(r("input",{type:"number",id:"doctorExperience","onUpdate:modelValue":e[9]||(e[9]=i=>o.doctorExperience=i),onInput:e[10]||(e[10]=i=>s.onInput("doctorExperience")),onBlur:e[11]||(e[11]=i=>s.onInput("doctorExperience")),min:"0",max:"60",placeholder:"10",class:"w-full px-4 py-3 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,544),[[m,o.doctorExperience,void 0,{number:!0}]]),o.touched.doctorExperience&&o.errors.doctorExperience?(d(),l("p",oe,a(o.errors.doctorExperience),1)):n("",!0)]),r("div",re,[e[23]||(e[23]=r("label",{for:"doctorContact",class:"block text-gray-600 required"},"Contact Number",-1)),u(r("input",{type:"tel",id:"doctorContact","onUpdate:modelValue":e[12]||(e[12]=i=>o.doctorContact=i),onInput:e[13]||(e[13]=i=>s.onInput("doctorContact")),onBlur:e[14]||(e[14]=i=>s.onInput("doctorContact")),placeholder:"e.g., +1 555 123 4567",class:"w-full px-4 py-3 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,544),[[m,o.doctorContact]]),o.touched.doctorContact&&o.errors.doctorContact?(d(),l("p",se,a(o.errors.doctorContact),1)):n("",!0)]),r("div",ie,[e[24]||(e[24]=r("label",{for:"doctorEmail",class:"block text-gray-600 required"},"Email",-1)),u(r("input",{type:"email",id:"doctorEmail","onUpdate:modelValue":e[15]||(e[15]=i=>o.doctorEmail=i),onInput:e[16]||(e[16]=i=>s.onInput("doctorEmail")),onBlur:e[17]||(e[17]=i=>s.onInput("doctorEmail")),placeholder:"dineshkumar@gmail.com",class:"w-full px-4 py-3 rounded-md border border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,544),[[m,o.doctorEmail]]),o.touched.doctorEmail&&o.errors.doctorEmail?(d(),l("p",de,a(o.errors.doctorEmail),1)):n("",!0)])]),r("div",ce,[r("button",{type:"button",class:"mr-4 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",onClick:e[18]||(e[18]=i=>t.$emit("cancel-form"))}," Cancel "),r("button",{type:"submit",disabled:!s.formValid,class:D(["px-4 py-2 rounded-md text-white",s.formValid?"bg-blue-600 hover:bg-blue-700":"bg-blue-300 cursor-not-allowed"])},a(s.isEditMode?"Update":"Submit"),11,le)])],32)])])}const ae=y(J,[["render",ne]]),ue={name:"DoctorList",data(){return{doctorsList:[],headers:H,searchValue:"",isDialogOpen:!1,selectedDoctor:void 0}},computed:{filteredDoctors(){const t=this.searchValue.trim().toLowerCase();return t?this.doctorsList.filter(e=>[e.doctorName,e.doctorSpecialist,String(e.doctorExperience??""),e.doctorContact,e.doctorEmail].some(x=>(x||"").toLowerCase().includes(t))):this.doctorsList}},mounted(){this.getDoctorsDetails()},components:{NoData:q,CommonDialog:V,CreateDoctor:ae,EditIcon:L,TrashIcon:_},methods:{closeDialog(){this.isDialogOpen=!1,this.selectedDoctor=void 0,this.getDoctorsDetails()},getDoctorsDetails(){this.doctorsList=F()},editDoctor(t){this.selectedDoctor=t,this.isDialogOpen=!0},deleteDoctor(t){h(t.createdBy)&&confirm("Delete this doctor?")&&(M(t.id),this.selectedDoctor=void 0,this.getDoctorsDetails())},canModify(t){return h(t)},onDoctorUpdated(){this.selectedDoctor=void 0,this.getDoctorsDetails(),this.closeDialog()}}},me={class:"flex justify-between items-center flex-wrap"},pe={class:"justify-end flex mb-4 items-end gap-4"},fe=["onClick"],be=["onClick"],xe={key:1};function he(t,e,x,g,o,s){const i=p("EditIcon"),C=p("TrashIcon"),v=p("EasyDataTable"),N=p("NoData"),k=p("CreateDoctor"),I=p("CommonDialog");return d(),l(G,null,[r("div",me,[e[6]||(e[6]=r("div",null,[r("h1",{class:"text-3xl font-bold"},"Doctor List")],-1)),r("div",pe,[r("div",null,[e[5]||(e[5]=r("span",null,"search value: ",-1)),u(r("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=c=>o.searchValue=c)},null,512),[[m,o.searchValue]])]),r("button",{type:"button",class:"inline-flex items-center rounded bg-blue-600 h-fit px-4 py-2 text-white text-sm hover:bg-blue-700 focus:outline-none focus:ring",onClick:e[1]||(e[1]=c=>o.isDialogOpen=!0)}," Add new ")])]),o.doctorsList&&o.doctorsList.length?(d(),z(v,{key:0,headers:o.headers,items:s.filteredDoctors,alternating:"","rows-per-page":5},{"item-actions":E(c=>[s.canModify(c.createdBy)?(d(),l("button",{key:0,class:"action-btn",onClick:S=>s.editDoctor(c),"aria-label":"Edit"},[f(i,{class:"w-4 h-4"})],8,fe)):n("",!0),s.canModify(c.createdBy)?(d(),l("button",{key:1,class:"action-btn danger",onClick:S=>s.deleteDoctor(c),"aria-label":"Delete"},[f(C,{class:"w-4 h-4"})],8,be)):n("",!0)]),_:1},8,["headers","items"])):(d(),l("div",xe,[f(N,{message:"No doctors found",description:"Try adjusting your filters."})])),f(I,{modelValue:o.isDialogOpen,"onUpdate:modelValue":e[4]||(e[4]=c=>o.isDialogOpen=c),title:"Doctor Details","close-on-esc":!0,"close-on-backdrop":!0},{default:E(()=>[f(k,{"user-data":o.selectedDoctor,onCancelForm:e[2]||(e[2]=c=>s.closeDialog()),onDoctorAdded:e[3]||(e[3]=c=>s.closeDialog()),onDoctorUpdated:s.onDoctorUpdated},null,8,["user-data","onDoctorUpdated"])]),_:1},8,["modelValue"])],64)}const ke=y(ue,[["render",he],["__scopeId","data-v-7db8002b"]]);export{ke as default};
